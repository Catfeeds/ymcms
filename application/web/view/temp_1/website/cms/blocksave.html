{include file="$temp_header" /}
<!--主体内容 start-->
<div id="main">
	{include file="$temp_aside" /}
    <div id="content">
    	<div class="title">
          <div class="box">
        	<div class="lef">{$title}</div>
            <div class="rig">
            	<a href="{:url('web/website.cms/blocklist')}"><img src="__IMAGE__/ico_white/circle_left.png" />返回</a>
            </div>
          </div>
        </div>
        <div class="section">
            <div class="tit">
                <img src="__IMAGE__/ico_black/circle_plus.png" />{$title}
            </div>
    		<!--内容 start-->
            <div class="info">
              <form action="" id="fileups" method="post" enctype="multipart/form-data">
              <iframe id="upload_target" name="upload_target" src="#" style="display:none;width:0;height:0;border:0px solid #fff;"></iframe>
				<ul>
                	<li>
                    	<div class="lef"><span class="nam">背景颜色：</span></div>
                        <div class="rig"><input type="text" id="f1" name="background-color" value="{notempty name='content["background-color"]'}{$content['background-color']}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>
                	<li>
                    	<div class="lef"><span class="nam">背景图片：</span></div>
                        <div class="rig">{notempty name='content["background-image"]'}<div class="imgbox"><label class="files"><input class="filesinp" type="file" name="file_1" value="" /><span><img src="{$content['background-image']}" class="filejson" filename="{$content['background-image']}" /><b>背景图</b></span></label></div>{else/}<div class="imgbox"><label class="files"><input class="filesinp" type="file" name="file_2" value="" /><span><img src="__IMAGE__/ico_white/magnifying_glass.png" /><b>选择文件</b></span></label></div>{/notempty}<div class="imgbox"><input type="hidden" name="background-image" class="fileval" value="" /></div></div>
                    </li>
                	<li>
                    	<div class="lef"><span class="nam">背景图片位置：</span></div>
                        <div class="rig">
                     	<select name="background-position">
                        	<option value="top left" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="top left" '}selected{/if}{/notempty}>左上角</option>
                        	<option value="top center" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="top center" '}selected{/if}{/notempty}>上居中</option>
                            <option value="top right" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="top right" '}selected{/if}{/notempty}>右上角</option>
                            <option value="center left" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="center left" '}selected{/if}{/notempty}>左居中</option>
                            <option value="center center" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="center center" '}selected{/if}{/notempty}>正居中</option>
                            <option value="center right" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="center right" '}selected{/if}{/notempty}>右居中</option>
                            <option value="bottom left" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="bottom left" '}selected{/if}{/notempty}>左下角</option>
                            <option value="bottom center" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="bottom center" '}selected{/if}{/notempty}>下居中</option>
                            <option value="bottom right" {notempty name='content["background-position"]'}{if condition='$content["background-position"]=="bottom right" '}selected{/if}{/notempty}>右下角</option>                            
                        </select>                        
                        </div>
                    </li>                
                	<li>
                    	<div class="lef"><span class="nam">背景图片重复：</span></div>
                        <div class="rig">
                     	<select name="background-repeat">
                        	<option value="repeat" {notempty name='content["background-repeat"]'}{if condition='$content["background-repeat"]=="repeat" '}selected{/if}{/notempty}>重复</option>
                        	<option value="repeat-x" {notempty name='content["background-repeat"]'}{if condition='$content["background-repeat"]=="repeat-x" '}selected{/if}{/notempty}>水平重复</option>
                        	<option value="repeat-y" {notempty name='content["background-repeat"]'}{if condition='$content["background-repeat"]=="repeat-y" '}selected{/if}{/notempty}>垂直重复</option>
                        	<option value="no-repeat" {notempty name='content["background-repeat"]'}{if condition='$content["background-repeat"]=="no-repeat" '}selected{/if}{/notempty}>不重复</option>                                                                                 
                        </select>                         
                        </div>
                    </li>                                                            
                	<li>
                    	<div class="lef"><span class="nam">边框样式：</span></div>
                        <div class="rig">
                        <select name="border-style">
                        	<option value="none" {notempty name='content["border-style"]'}{if condition='$content["border-style"]=="none" '}selected{/if}{/notempty}>无</option>
                            <option value="dotted" {notempty name='content["border-style"]'}{if condition='$content["border-style"]=="dotted" '}selected{/if}{/notempty}>点状</option>
                            <option value="dashed" {notempty name='content["border-style"]'}{if condition='$content["border-style"]=="dashed" '}selected{/if}{/notempty}>虚线</option>
                            <option value="solid" {notempty name='content["border-style"]'}{if condition='$content["border-style"]=="solid" '}selected{/if}{/notempty}>实线</option>
                            <option value="double" {notempty name='content["border-style"]'}{if condition='$content["border-style"]=="double" '}selected{/if}{/notempty}>双线</option>
                        </select>
                    </li>
                	<li>
                    	<div class="lef"><span class="nam">边框颜色：</span></div>
                        <div class="rig"><input type="text" id="f2" name="border-color" value="{notempty name='content["border-color"]'}{$content['border-color']}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>
                	<li>
                    	<div class="lef"><span class="nam">边框大小：</span></div>
                        <div class="rig"><input type="text" name="border-width" value="{notempty name='content["border-width"]'}{$content['border-width']}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>                    
                	<li>
                    	<div class="lef"><span class="nam">外边距：</span></div>
                        <div class="rig"><input type="text" name="margin" value="{notempty name='content.margin'}{$content.margin}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>
                	<li>
                    	<div class="lef"><span class="nam">内边距：</span></div>
                        <div class="rig"><input type="text" name="padding" value="{notempty name='content.padding'}{$content.padding}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>                                        
                	<li>
                    	<div class="lef"><span class="nam">透明度：</span></div>
                        <div class="rig"><input type="text" name="opacity" value="{notempty name='content.opacity'}{$content.opacity}{/notempty}" placeholder="请输入0~1的数值.." /><span class="des">如：0.5</span></div>
                    </li> 
                	<li>
                    	<div class="lef"><span class="nam">层级：</span></div>
                        <div class="rig"><input type="text" name="z-index" value="{notempty name='content["z-index"]'}{$content['z-index']}{/notempty}" placeholder="请输入数值.." /><span class="des">如：3</span></div>
                    </li>  
                	<li>
                    	<div class="lef"><span class="nam">文字颜色：</span></div>
                        <div class="rig"><input type="text" id="f3" name="color" value="{notempty name='content["color"]'}{$content['color']}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>                                      
                	<li>
                    	<div class="lef"><span class="nam">距离主体区左侧距离：</span></div>
                        <div class="rig"><input type="text" name="left" value="{notempty name='content.left'}{$content.left}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>
                	<li>
                    	<div class="lef"><span class="nam">距离主体区顶部距离：</span></div>
                        <div class="rig"><input type="text" name="top" value="{notempty name='content.top'}{$content.top}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>
                	<li>
                    	<div class="lef"><span class="nam">宽度：</span></div>
                        <div class="rig"><input type="text" name="width" value="{notempty name='content.width'}{$content.width}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>  
                	<li>
                    	<div class="lef"><span class="nam">高度：</span></div>
                        <div class="rig"><input type="text" name="height" value="{notempty name='content.height'}{$content.height}{/notempty}" placeholder="请输入数值.." /><span class="des">单位像素(PX)</span></div>
                    </li>                                                                                                 
                    <li>
                    	<div class="lef">&nbsp;</div>
                        <div class="rig"><button type="button" id="upmit">{$submit.name}</button></div>
                    </li>
                </ul>
                <script>
				/*实时整理上传参数*/
				function fileval(randclass){
					var filejson_li = randclass.parents('li');
					var filejson_arr = new Array();
					filejson_li.find('.files').each(function(i){
                        filejson_arr[i] = "{$sitedir}"+$(this).find('.filejson').attr('filename');
                    });
					filejson_li.find('.fileval').val(filejson_arr);
				}
				$('.fileval').each(function(){
                   fileval($(this));
                });
                /*异步上传的回调方法*/
                function stopUpload(filename,oldname,randclass){
					var randclass = $('.'+randclass);
					var filesrc = "{$sitedir}"+filename;
					randclass.find('img').addClass('filejson').attr('src',filesrc).attr('filename',filename);
					randclass.find('b').text(oldname);
					fileval(randclass);
                }				
				$(document).ready(function(e){
					/*解析背景图片*/
					if($(".filejson").length > 0){
						var bgimg = $(".filejson").attr('src');
						var imgstr = bgimg.substring(4);
						var imgfile = imgstr.substring(0,imgstr.length-1);
						$(".filejson").attr('src',imgfile);
						$(".fileval").attr('value',imgfile);
					}
					/*多图*/
					$('.filesinp').each(function(i) {
                        $(this).attr('name','filechange_'+i);
                    });
					/*选择图片*/
					function filechange(){	
						/*选取事件*/
						$('.filesinp').change(function(){
							/*增加异步识别类*/
							var mydate = new Date();
							var randclass = 'ajax'+mydate.getTime()+parseInt(999990*Math.random());
							$(this).parents('label').addClass(randclass);
							/*提交表单*/
							var inpname = $(this).attr('name');
							$("#fileups").attr("action","{:url('cms/fileups')}?inpname="+inpname+"&randclass="+randclass);
							$("#fileups").attr("target","upload_target");
							$("#fileups").submit();
						})
						/*删除*/
						$(".del").click(function(){
							var delfileval = $(this).parents('li').find('.fileval');
							$(this).parent().remove();
							fileval(delfileval);
						})
					}
					filechange();
					/*上传添加*/
					$(".fileadd").click(function(){
						var filesinp_num = $('.filesinp').length + 1;
						$(this).parents('.imgbox').before('<div class="imgbox"><label class="files"><input class="filesinp" type="file" name="fileadd_'+filesinp_num+'" value="" /><span><img src="__IMAGE__/ico_white/magnifying_glass.png" /><b>选择文件</b></span></label><span class="del"><img src="__IMAGE__/ico_white/bin.png" /></span></div>');
						filechange();
					})
					/*提交*/
					$("#upmit").click(function(){
						$("#fileups").attr("action","{$submit.url}");
						$("#fileups").attr("target","");
						$("#fileups").submit();						
					})				
                });
				</script>
              <form>  
            </div>
            <!--内容 end-->
        </div>        
    </div>
</div>
<link rel="stylesheet" href="__CSS__/jquery.bigcolorpicker.css" type="text/css" />
<script type="text/javascript" src="__JS__/jquery.bigcolorpicker.js"></script>
<script type="text/javascript">
$(function(){
	$("#f1").bigColorpicker("f1","L",10);
	$("#f2").bigColorpicker("f2","L",10);
	$("#f3").bigColorpicker("f3","L",10);
});
</script>
<!--主体内容 end-->
{include file="$temp_footer" /}